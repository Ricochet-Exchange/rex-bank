{"version":3,"sources":["utils/web3-service.js","utils/chains.js","utils/auth.js","contexts/RootContexts.js","utils/constants.js","contexts/BankContext.js","utils/token-service.js","utils/bank-service.js","utils/helpers.js","components/shared/EtherscanLink/EthercanLink.js","components/shared/Loader/Loader.js","components/shared/ApproveToken/ApproveToken.js","components/vaults/CreateVault/DepositBorrow.js","Icons.js","components/vaults/CreateVault/CreateVault.js","components/account/Web3SignIn.js","components/banks/BankStatusBar/BankStatusBar.js","components/banks/BankDetails/BankDetails.js","views/Banks/Banks.js","components/vaults/VaultActions/VaultActions.js","components/vaults/VaultTransaction/VaultTransaction.js","components/vaults/VaultDetails/VaultDetails.js","views/Vault/Vault.js","views/fourOhFour/fourOhFour.js","Routes.js","components/shared/SideNav/SideNav.js","App.js","serviceWorker.js","index.js"],"names":["Web3Service","web3","this","abi","address","eth","Contract","privateKey","password","accounts","encrypt","getBlock","amount","utils","fromWei","toString","toWei","hexString","hexToUtf8","num","toNumber","hash","getTransaction","addr","getBalance","block","timestamp","isAddress","supportedChains","name","short_name","chain","network","chain_id","network_id","rpc_url","getChainData","chainId","chainData","filter","Error","API_KEY","process","REACT_APP_INFURA_PROJECT_ID","includes","rpcUrl","replace","USER_TYPE","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","split","pop","w3connect","web3Modal","a","connect","provider","Web3","getChainId","injectedChainId","alert","providers","HttpProvider","Web3Context","createContext","RootContexts","children","useState","w3Context","setW3Context","useEffect","Web3Modal","cacheProvider","loginType","localStorage","getItem","cachedProvider","console","log","w3m","getAccounts","account","service","setItem","error","setUp","Provider","value","TOKEN_PAIRS","BankContext","React","initialState","tokenPairs","activePair","bankAddresses","banks","activeBank","data","refreshBanks","reducer","state","action","type","payload","BankContextProvider","props","useReducer","dispatch","Consumer","TokenService","tokenAddress","web3Service","Erc20Abi","initContract","contract","methods","symbol","call","contract32","Erc20Bytes32Abi","indexOf","toUtf8","decimals","atBlock","balanceOf","accountAddr","allowance","from","guy","wad","toBN","pow","approve","send","once","txHash","then","resp","catch","err","BankService","contractAddr","connectedAccount","bankAbi","BankAbi","getVaultData","vault","getDebtTokenAddress","debtTokenAddress","getCollateralTokenAddress","collateralTokenAddress","getTokenData","debtToken","collateralToken","getDebtTokenPrice","getDebtTokenPriceGranularity","price","granularityPrice","getCollateralTokenPrice","getCollateralTokenPriceGranularity","getInterestRate","getOriginationFee","getCollateralizationRatio","getLiquidationPenalty","getReserveBalance","getReserveCollateralBalance","getName","interestRate","originationFee","collateralizationRatio","liquidationPenalty","reserveBalance","reserveCollateralBalance","tokenService","unlocked","getSymbol","getDecimals","unlockedAmount","getVaultCollateralAmount","collateralAmount","getVaultRepayAmount","repayAmount","getVaultDebtAmount","debtAmount","getVaultCollateralizationRatio","hasVault","depositAmount","setTx","deposit","vaultDeposit","borrowAmount","vaultBorrow","withdrawAmount","vaultWithdraw","vaultRepay","truncateAddr","slice","getAcModifier","aC","activeTransaction","newValue","getAdModifier","aD","EtherscanLink","path","className","href","target","rel","Loading","msg","size","color","height","width","ApproveToken","bankAddress","setError","setLocalApproved","useContext","loading","setLoading","handleClick","shape","onClick","DepositBorrow","vaultData","setVaultData","setStep","bank","tx","localApproved","handleChange","e","update","prevState","handleNextClick","borrow","needsUnlock","onChange","addonAfter","disabled","style","fill","viewBox","xmlns","xmlnsXlink","d","cx","cy","r","id","transform","CreateVault","visible","setVisible","step","wrapClassName","onCancel","maskClosable","footer","closeIcon","Icons","to","renderStep","Web3SignIn","setWeb3Service","activate","web3Connect","BankStatusBar","coll","BankDetails","creatingVault","setCreatingVault","toFixed","Banks","getBankData","bankService","getBankState","bankState","hasWeb3","needsData","Object","keys","map","key","VaultActions","section","setActiveTransaction","txPending","VaultTransaction","setNewValue","handleAction","withdraw","res","repay","isCollateral","vaultTxCalcValues","cR","pD","pC","newLiquidationPrice","newCollateralizationRatio","getVaultTxCalcValues","Infinity","isRepay","needsApproval","needsRepayUnlock","VaultDetails","collColor","setTxPending","vaultCalcValues","liquidationPrice","withdrawAvailable","borrowAvailable","getVaultCalcValues","Vault","setHasVault","location","useLocation","search","some","FourOhFour","Routes","exact","component","SideNav","defaultSelectedKeys","pathname","mode","inlineIndent","Item","Content","Layout","Sider","App","minHeight","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.e765f10e.chunk.js","sourcesContent":["export default class Web3Service {\n  constructor(web3) {\n    this.web3 = web3;\n  }\n\n  initContract(abi, address) {\n    let contract = new this.web3.eth.Contract(abi, address);\n    return contract;\n  }\n\n  createContract(abi) {\n    let contract = new this.web3.eth.Contract(abi);\n    return contract;\n  }\n\n  getKeyStore(privateKey, password) {\n    return this.web3.eth.accounts.encrypt(privateKey, password);\n  }\n\n  async latestBlock() {\n    return await this.web3.eth.getBlock(\"latest\");\n  }\n\n  fromWei(amount) {\n    if (!amount) {\n      return 0;\n    }\n\n    return this.web3.utils.fromWei(amount.toString(), \"ether\");\n  }\n\n  toWei(amount) {\n    return this.web3.utils.toWei(amount.toString(), \"ether\");\n  }\n\n  toUtf8(hexString) {\n    return this.web3.utils.hexToUtf8(hexString);\n  }\n\n  toNumber(num) {\n    return num.toNumber();\n  }\n\n  getTransaction(hash) {\n    return this.web3.eth.getTransaction(hash);\n  }\n\n  getBalance(addr) {\n    return this.web3.eth.getBalance(addr);\n  }\n\n  getTime(block) {\n    return this.web3.eth.getBlock(block).timestamp;\n  }\n\n  isAddress(address) {\n    return this.web3.utils.isAddress(address);\n  }\n}\n","const supportedChains = [\n  {\n    name: \"Ethereum Mainnet\",\n    short_name: \"eth\",\n    chain: \"ETH\",\n    network: \"mainnet\",\n    chain_id: 1,\n    network_id: 1,\n    rpc_url: \"https://mainnet.infura.io/\",\n  },\n  {\n    name: \"Ethereum Ropsten\",\n    short_name: \"rop\",\n    chain: \"ETH\",\n    network: \"ropsten\",\n    chain_id: 3,\n    network_id: 3,\n    rpc_url: \"https://ropsten.infura.io/\",\n  },\n  {\n    name: \"Ethereum Rinkeby\",\n    short_name: \"rin\",\n    chain: \"ETH\",\n    network: \"rinkeby\",\n    chain_id: 4,\n    network_id: 4,\n    rpc_url: \"https://rinkeby.infura.io/\",\n  },\n  {\n    name: \"Ethereum Görli\",\n    short_name: \"gor\",\n    chain: \"ETH\",\n    network: \"goerli\",\n    chain_id: 5,\n    network_id: 5,\n    rpc_url: \"https://rpc.goerli.mudit.blog/\",\n  },\n  {\n    name: \"Ethereum Kovan\",\n    short_name: \"kov\",\n    chain: \"ETH\",\n    network: \"kovan\",\n    chain_id: 42,\n    network_id: 42,\n    rpc_url: \"https://kovan.infura.io/\",\n  },\n  {\n    name: \"Ethereum Classic Mainnet\",\n    short_name: \"etc\",\n    chain: \"ETC\",\n    network: \"mainnet\",\n    chain_id: 61,\n    network_id: 1,\n    rpc_url: \"https://ethereumclassic.network\",\n  },\n  {\n    name: \"POA Network Sokol\",\n    short_name: \"poa\",\n    chain: \"POA\",\n    network: \"sokol\",\n    chain_id: 77,\n    network_id: 1,\n    rpc_url: \"https://sokol.poa.network\",\n  },\n  {\n    name: \"POA Network Core\",\n    short_name: \"skl\",\n    chain: \"POA\",\n    network: \"core\",\n    chain_id: 99,\n    network_id: 2,\n    rpc_url: \"https://core.poa.network\",\n  },\n  {\n    name: \"xDAI Chain\",\n    short_name: \"xdai\",\n    chain: \"xDAI\",\n    network: \"mainnet\",\n    chain_id: 100,\n    network_id: 1,\n    rpc_url: \"https://dai.poa.network\",\n  },\n];\n\nexport function getChainData(chainId) {\n  const chainData = supportedChains.filter(\n    (chain) => chain.chain_id === chainId\n  )[0];\n\n  if (!chainData) {\n    throw new Error(\"ChainId missing or not supported\");\n  }\n\n  const API_KEY = process.env.REACT_APP_INFURA_PROJECT_ID;\n\n  if (\n    chainData.rpc_url.includes(\"infura.io\") &&\n    chainData.rpc_url.includes(\"%API_KEY%\") &&\n    API_KEY\n  ) {\n    const rpcUrl = chainData.rpc_url.replace(\"%API_KEY%\", API_KEY);\n\n    return {\n      ...chainData,\n      rpc_url: rpcUrl,\n    };\n  }\n\n  return chainData;\n}\n\nexport default supportedChains;\n","import Web3 from \"web3\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\n\nimport { getChainData } from \"./chains\";\n\nexport const USER_TYPE = {\n  WEB3: \"web3\",\n  READ_ONLY: \"readonly\",\n};\n\nexport const providerOptions = {\n  walletconnect: {\n    package: WalletConnectProvider, // required\n    options: {\n      infuraId: process.env.REACT_APP_INFURA_URI.split(\"/\").pop(),\n    },\n  },\n};\n\nexport const w3connect = async (web3Modal) => {\n  const provider = await web3Modal.connect();\n\n  let web3 = new Web3(provider);\n\n  const injectedChainId = await web3.eth.getChainId();\n\n  if (injectedChainId !== +process.env.REACT_APP_CHAIN_ID) {\n    alert(\n      `Please switch Web3 to the correct network and try signing in again. Detected network: ${\n        getChainData(injectedChainId).network\n      }, Required network: ${\n        getChainData(+process.env.REACT_APP_CHAIN_ID).network\n      }`\n    );\n    // throw new Error(\n    //   `Injected web3 chainId: ${injectedChainId}, process.env: ${process.env.REACT_APP_CHAIN_ID}`\n    // );\n\n    web3 = new Web3(\n      new Web3.providers.HttpProvider(process.env.REACT_APP_INFURA_URI)\n    );\n  }\n\n  return { web3Modal, web3 };\n};\n","import React, { useState, useEffect, createContext } from \"react\";\nimport Web3Modal from \"web3modal\";\nimport Web3 from \"web3\";\n\nimport Web3Service from \"../utils/web3-service\";\nimport { w3connect, providerOptions, USER_TYPE } from \"../utils/auth\";\nimport { getChainData } from \"../utils/chains\";\n\nexport const Web3Context = createContext();\n\nconst RootContexts = ({ children }) => {\n  const [w3Context, setW3Context] = useState();\n\n  useEffect(() => {\n    const setUp = async () => {\n      const web3Modal = new Web3Modal({\n        network: getChainData(+process.env.REACT_APP_CHAIN_ID).network, // optional\n        providerOptions, // required\n        cacheProvider: true,\n      });\n      let loginType = localStorage.getItem(\"loginType\") || USER_TYPE.READ_ONLY;\n\n      if (web3Modal.cachedProvider) {\n        loginType = USER_TYPE.WEB3;\n      }\n\n      try {\n        console.log(`Initializing account type: ${loginType || \"read-only\"}`);\n\n        switch (loginType) {\n          case USER_TYPE.WEB3: {\n            if (web3Modal.cachedProvider) {\n              const w3m = await w3connect(web3Modal);\n              let [account] = await w3m.web3.eth.getAccounts();\n              const service = new Web3Service(w3m.web3);\n              setW3Context({ service, account: account || \"\" });\n            } else {\n              const web3 = new Web3(\n                new Web3.providers.HttpProvider(\n                  process.env.REACT_APP_INFURA_URI\n                )\n              );\n              const service = new Web3Service(web3);\n              setW3Context({ service, account: \"\" });\n            }\n            break;\n          }\n          case USER_TYPE.READ_ONLY:\n          default:\n            const web3 = new Web3(\n              new Web3.providers.HttpProvider(process.env.REACT_APP_INFURA_URI)\n            );\n            const service = new Web3Service(web3);\n            setW3Context({ service, account: \"\" });\n            break;\n        }\n        localStorage.setItem(\"loginType\", loginType);\n      } catch (e) {\n        console.error(\n          `Could not log in with loginType ${loginType}: ${e.toString()}`\n        );\n\n        const web3 = new Web3(\n          new Web3.providers.HttpProvider(\n            process.env.REACT_APP_INFURA_URI.split(\"/\").pop()\n          )\n        );\n        const service = new Web3Service(web3);\n        setW3Context({ service, account: \"\" });\n      } finally {\n      }\n    };\n\n    setUp();\n  }, []);\n\n  return (\n    <Web3Context.Provider value={[w3Context, setW3Context]}>\n      {children}\n    </Web3Context.Provider>\n  );\n};\n\nexport default RootContexts;\n","export const TOKEN_PAIRS = [\"TRB-DAI\"];\n\nexport const CONTRACT_ADDRESSES = {\n  4: [\n    \"0xdecd14432e7b967a874f171e8f5b9e569049316f\",\n    // \"0x2b178fD4D57f3EF399aD099Ee32397D5541D1628\",\n  ],\n  1: [\"0x4Aba792D41928D4bC65A4b77d840Fc6418940438\"],\n};\n","import React, { useReducer } from \"react\";\n\nimport { TOKEN_PAIRS, CONTRACT_ADDRESSES } from \"../utils/constants\";\n\nconst BankContext = React.createContext();\n\n// TODO: Will be dynamic and pulled from a factory contract or a larger list in the future\nconst initialState = {\n  tokenPairs: TOKEN_PAIRS,\n  activePair: TOKEN_PAIRS[0],\n  bankAddresses: CONTRACT_ADDRESSES[process.env.REACT_APP_CHAIN_ID],\n  banks: null,\n  activeBank: {\n    address: null,\n    service: null,\n    data: null,\n  },\n  refreshBanks: false,\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"setBanks\": {\n      return { ...state, banks: action.payload, refreshBanks: false };\n    }\n    case \"refreshBanks\": {\n      return { ...state, refreshBanks: true };\n    }\n    case \"clearBanks\": {\n      return {\n        ...state,\n        banks: initialState.banks,\n      };\n    }\n    case \"setActivePair\": {\n      return { ...state, activePair: action.payload };\n    }\n\n    default: {\n      return initialState;\n    }\n  }\n};\n\nconst BankContextProvider = (props) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = { state, dispatch };\n\n  return (\n    <BankContext.Provider value={value}>{props.children}</BankContext.Provider>\n  );\n};\n\nconst BankContextConsumer = BankContext.Consumer;\n\nexport { BankContext, BankContextProvider, BankContextConsumer };\n","import Erc20Bytes32Abi from \"../contracts/Erc20bytes32.json\";\nimport Erc20Abi from \"../contracts/Erc20.json\";\n\nexport default class TokenService {\n  tokenAddress;\n  web3Service;\n  contract;\n  contract32;\n  abi;\n\n  constructor(tokenAddress, web3Service) {\n    this.web3Service = web3Service;\n    this.abi = Erc20Abi;\n    this.tokenAddress = tokenAddress;\n  }\n\n  async initContract(abi = this.abi) {\n    this.contract = await this.web3Service.initContract(abi, this.tokenAddress);\n    return this.contract;\n  }\n\n  async getSymbol() {\n    let symbol;\n\n    try {\n      if (!this.contract) {\n        this.contract = await this.initContract(Erc20Abi);\n      }\n      symbol = await this.contract.methods.symbol().call();\n    } catch {\n      if (!this.contract32) {\n        this.contract32 = await this.initContract(Erc20Bytes32Abi);\n      }\n      symbol = await this.contract32.methods.symbol().call();\n    }\n\n    if (symbol.indexOf(\"0x\") > -1) {\n      symbol = this.web3Service.toUtf8(symbol);\n    }\n\n    return symbol;\n  }\n\n  async getDecimals() {\n    let decimals;\n\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    try {\n      decimals = await this.contract.methods.decimals().call();\n      return decimals;\n    } catch {\n      return 18;\n    }\n  }\n\n  async balanceOf(account, atBlock = \"latest\") {\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    const balanceOf = await this.contract.methods\n      .balanceOf(account)\n      .call({}, atBlock);\n\n    return balanceOf;\n  }\n\n  async allowance(accountAddr, tokenAddress) {\n    if (!this.contract) {\n      await this.initContract();\n    }\n    const allowance = await this.contract.methods\n      .allowance(accountAddr, tokenAddress)\n      .call();\n    return allowance;\n  }\n\n  async approve(from, guy, wad) {\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    if (!wad) {\n      //set max\n      wad = this.web3Service.web3.utils\n        .toBN(2)\n        .pow(this.web3Service.web3.utils.toBN(255));\n    }\n\n    const approve = await this.contract.methods\n      .approve(guy, wad)\n      .send({ from })\n      .once(\"transactionHash\", (txHash) => {})\n      .then((resp) => {\n        return resp;\n      })\n      .catch((err) => {\n        console.log(err);\n        return { error: \"rejected transaction\" };\n      });\n\n    return approve;\n  }\n}\n","import BankAbi from \"../contracts/Bank.json\";\nimport TokenService from \"./token-service\";\n\nexport default class BankService {\n  contractAddr;\n  web3Service;\n  bankAbi;\n  contract;\n\n  constructor(contractAddr, web3Service, connectedAccount) {\n    this.contractAddr = contractAddr;\n    this.web3Service = web3Service;\n    this.bankAbi = BankAbi.abi;\n    this.connectedAccount = connectedAccount;\n  }\n\n  async initContract() {\n    this.contract = await this.web3Service.initContract(\n      this.bankAbi,\n      this.contractAddr\n    );\n    return this.contract;\n  }\n\n  async getBankState() {\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    const vault = await this.getVaultData();\n\n    const debtTokenAddress = await this.contract.methods\n      .getDebtTokenAddress()\n      .call();\n    const collateralTokenAddress = await this.contract.methods\n      .getCollateralTokenAddress()\n      .call();\n    const debtToken = await this.getTokenData(debtTokenAddress);\n    const collateralToken = await this.getTokenData(collateralTokenAddress);\n\n    return {\n      vault,\n      debtToken: {\n        ...debtToken,\n        price: await this.contract.methods.getDebtTokenPrice().call(),\n        granularityPrice: await this.contract.methods\n          .getDebtTokenPriceGranularity()\n          .call(),\n      },\n      collateralToken: {\n        ...collateralToken,\n        price: await this.contract.methods.getCollateralTokenPrice().call(),\n        granularityPrice: await this.contract.methods\n          .getCollateralTokenPriceGranularity()\n          .call(),\n      },\n      interestRate: await this.contract.methods.getInterestRate().call(),\n      originationFee: await this.contract.methods.getOriginationFee().call(),\n      collateralizationRatio: await this.contract.methods\n        .getCollateralizationRatio()\n        .call(),\n      liquidationPenalty: await this.contract.methods\n        .getLiquidationPenalty()\n        .call(),\n      reserveBalance: await this.contract.methods.getReserveBalance().call(),\n      reserveCollateralBalance: await this.contract.methods\n        .getReserveCollateralBalance()\n        .call(),\n      name: await this.contract.methods.getName().call(),\n    };\n  }\n\n  async getTokenData(tokenAddress) {\n    const tokenService = new TokenService(tokenAddress, this.web3Service);\n\n    let unlocked = 0;\n    if (this.connectedAccount) {\n      unlocked = await tokenService.allowance(\n        this.connectedAccount,\n        this.contractAddr\n      );\n    }\n\n    return {\n      address: tokenAddress,\n      symbol: await tokenService.getSymbol(),\n      decimals: await tokenService.getDecimals(),\n      unlockedAmount: unlocked,\n    };\n  }\n\n  async getVaultData() {\n    const collateralAmount = await this.contract.methods\n      .getVaultCollateralAmount()\n      .call({ from: this.connectedAccount });\n    const repayAmount = await this.contract.methods\n      .getVaultRepayAmount()\n      .call({ from: this.connectedAccount });\n    const debtAmount = await this.contract.methods\n      .getVaultDebtAmount()\n      .call({ from: this.connectedAccount });\n\n    let collateralizationRatio = 0;\n    if (this.connectedAccount) {\n      collateralizationRatio = await this.contract.methods\n        .getVaultCollateralizationRatio(this.connectedAccount)\n        .call();\n    }\n\n    return {\n      collateralAmount,\n      repayAmount,\n      debtAmount,\n      collateralizationRatio,\n      hasVault: +debtAmount > 0 || +collateralAmount > 0,\n    };\n  }\n\n  async deposit(depositAmount, setTx) {\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    const amount = (+depositAmount * 1e18).toString();\n\n    let deposit = this.contract.methods\n      .vaultDeposit(amount)\n      .send({ from: this.connectedAccount })\n      .once(\"transactionHash\", (txHash) => {\n        setTx(txHash);\n      })\n      .then((resp) => {\n        return resp;\n      })\n      .catch((err) => {\n        console.log(err);\n        return { error: \"rejected transaction\" };\n      });\n    return deposit;\n  }\n\n  async borrow(borrowAmount, setTx) {\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    const amount = (+borrowAmount * 1e18).toString();\n\n    let deposit = this.contract.methods\n      .vaultBorrow(amount)\n      .send({ from: this.connectedAccount })\n      .once(\"transactionHash\", (txHash) => {\n        setTx(txHash);\n      })\n      .then((resp) => {\n        return resp;\n      })\n      .catch((err) => {\n        console.log(err);\n        return { error: \"rejected transaction\" };\n      });\n    return deposit;\n  }\n\n  async withdraw(withdrawAmount, setTx) {\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    const amount = (+withdrawAmount * 1e18).toString();\n\n    let deposit = this.contract.methods\n      .vaultWithdraw(amount)\n      .send({ from: this.connectedAccount })\n      .once(\"transactionHash\", (txHash) => {\n        setTx(txHash);\n      })\n      .then((resp) => {\n        return resp;\n      })\n      .catch((err) => {\n        console.log(err);\n        return { error: \"rejected transaction\" };\n      });\n    return deposit;\n  }\n\n  async repay(repayAmount, setTx) {\n    if (!this.contract) {\n      await this.initContract();\n    }\n\n    const amount = (+repayAmount * 1e18).toString();\n\n    let deposit = this.contract.methods\n      .vaultRepay(amount)\n      .send({ from: this.connectedAccount })\n      .once(\"transactionHash\", (txHash) => {\n        setTx(txHash);\n      })\n      .then((resp) => {\n        return resp;\n      })\n      .catch((err) => {\n        console.log(err);\n        return { error: \"rejected transaction\" };\n      });\n    return deposit;\n  }\n}\n","export const truncateAddr = (addr) => {\n  return addr.slice(0, 6) + \"...\" + addr.slice(-4);\n};\n\nexport const getVaultCalcValues = (data) => {\n  const cR = +data.collateralizationRatio / 100;\n  const aD = +data.vault.debtAmount / 10 ** +data.debtToken.decimals;\n  const pD = +data.debtToken.price / +data.debtToken.granularityPrice;\n  const aC =\n    +data.vault.collateralAmount / 10 ** +data.collateralToken.decimals;\n  const pC =\n    +data.collateralToken.price / +data.collateralToken.granularityPrice;\n  const liquidationPrice = (cR * aD * pD) / aC;\n  const withdrawAvailable = aC - (cR * aD * pD) / pC;\n  const borrowAvailable = (aC * pC) / pD / cR - aD;\n\n  return {\n    liquidationPrice,\n    withdrawAvailable,\n    borrowAvailable,\n  };\n};\n\nexport const getVaultTxCalcValues = (data, activeTransaction, newValue) => {\n  const cR = +data.collateralizationRatio / 100;\n  let aD = +data.vault.debtAmount / 10 ** +data.debtToken.decimals;\n  aD = getAdModifier(aD, activeTransaction, newValue);\n  const pD = +data.debtToken.price / +data.debtToken.granularityPrice;\n  let aC = +data.vault.collateralAmount / 10 ** +data.collateralToken.decimals;\n  aC = getAcModifier(aC, activeTransaction, newValue);\n  const pC =\n    +data.collateralToken.price / +data.collateralToken.granularityPrice;\n\n  const newLiquidationPrice = (cR * aD * pD) / aC;\n  const newCollateralizationRatio = ((aC * pC) / aD) * pD;\n\n  return {\n    newLiquidationPrice: newLiquidationPrice,\n    newCollateralizationRatio: !+newValue\n      ? +data.vault.collateralizationRatio / 100\n      : newCollateralizationRatio * 100,\n  };\n};\n\nconst getAcModifier = (aC, activeTransaction, newValue) => {\n  if (\n    activeTransaction === \"borrow\" ||\n    activeTransaction === \"repay\" ||\n    !+newValue\n  ) {\n    return aC;\n  } else if (activeTransaction === \"withdraw\") {\n    return aC - +newValue;\n  } else {\n    return aC + +newValue;\n  }\n};\n\nconst getAdModifier = (aD, activeTransaction, newValue) => {\n  if (\n    activeTransaction === \"withdraw\" ||\n    activeTransaction === \"deposit\" ||\n    !+newValue\n  ) {\n    return aD;\n  } else if (activeTransaction === \"borrow\") {\n    return aD + +newValue;\n  } else {\n    return aD - +newValue;\n  }\n};\n","import React from \"react\";\nimport '../../../App.scss';\n\nconst EtherscanLink = ({ path, hash }) => {\n  const uri = () => {\n    switch (process.env.REACT_APP_CHAIN_ID) {\n      case \"1\": {\n        return `https://etherscan.io/${path}/`;\n      }\n      case \"4\": {\n        return `https://rinkeby.etherscan.io/${path}/`;\n      }\n      default: {\n        return `https://etherscan.io/${path}/`;\n      }\n    }\n  };\n\n  return (\n    <div className=\"EtherscanLink\">\n      <a href={`${uri()}${hash}`} target=\"_blank\" rel=\"noopener noreferrer\">\n        view on Etherscan\n      </a>\n    </div>\n  );\n};\n\nexport default EtherscanLink;\n","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\n\nconst Loading = (props) => {\n  const msg = props.msg || \"Loading\";\n  const size = props.size || \"big\";\n  return (\n    <>\n    {size === \"big\" ? \n    <div className=\"Loading__big\">\n      <Loader type=\"Puff\" color=\"#B1B7DD\" height={50} width={50} />\n      <p>{msg}</p>\n    </div>\n    :\n      <div className=\"Loading__small\">\n        <Loader type=\"Puff\" color=\"#B1B7DD\" height={30} width={30} />\n        <p className=\"smalltxt\">{msg}</p>\n      </div>\n    }\n    </>\n  );\n};\n\nexport default Loading;\n","import React, { useContext, useState } from \"react\";\nimport { Button } from \"antd\";\n\nimport { Web3Context } from \"../../../contexts/RootContexts\";\nimport TokenService from \"../../../utils/token-service\";\nimport Loading from \"../Loader/Loader\";\n\nconst ApproveToken = ({\n  tokenAddress,\n  bankAddress,\n  setError,\n  setLocalApproved,\n}) => {\n  const [web3] = useContext(Web3Context);\n  const [loading, setLoading] = useState();\n\n  const handleClick = async () => {\n    setLoading(true);\n\n    const tokenService = new TokenService(tokenAddress, web3.service);\n    const approval = await tokenService.approve(web3.account, bankAddress);\n\n    if (approval.error) {\n      setError(\"Error approving token allowance\");\n    } else {\n      setLocalApproved(true);\n    }\n\n    setLoading(false);\n  };\n  return (\n    <div className=\"ApproveToken\">\n      {loading ? (\n        <Loading size=\"small\" />\n      ) : (\n        <Button\n          shape=\"round\"\n          size=\"large\"\n          className=\"purpleoutlined\"\n          onClick={() => handleClick()}\n        >\n          give allowance\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default ApproveToken;\n","import React, { useState } from \"react\";\nimport { Button, Input } from \"antd\";\n\nimport ApproveToken from \"../../shared/ApproveToken/ApproveToken\";\nimport Loading from \"../../shared/Loader/Loader\";\nimport EtherscanLink from \"../../shared/EtherscanLink/EthercanLink\";\n\nimport \"./CreateVault.scss\";\n\nconst DepositBorrow = ({ vaultData, setVaultData, setStep, bank }) => {\n  const [error, setError] = useState();\n  const [tx, setTx] = useState();\n  const [loading, setLoading] = useState();\n  const [localApproved, setLocalApproved] = useState();\n\n  const handleChange = (e) => {\n    const update = { [e.target.name]: e.target.value };\n    setVaultData((prevState) => {\n      return { ...prevState, ...update };\n    });\n  };\n\n  const handleNextClick = async () => {\n    //TODO: some validation to ensure balance of collateral token?\n    if (+vaultData.depositAmount > 0) {\n      setLoading(true);\n      const depositRes = await bank.service.deposit(\n        vaultData.depositAmount,\n        setTx\n      );\n\n      if (depositRes.error) {\n        setError(\"Error depositing token\");\n      }\n      setLoading(false);\n      setTx(null);\n    }\n\n    if (+vaultData.borrowAmount > 0) {\n      setLoading(true);\n      const borrowRes = await bank.service.borrow(\n        vaultData.borrowAmount,\n        setTx\n      );\n\n      if (borrowRes.error) {\n        setError(\"Error borrowing token\");\n      }\n\n      setLoading(false);\n      setTx(null);\n    }\n\n    setStep(3);\n  };\n\n  const needsUnlock =\n    +vaultData.depositAmount > +bank.data.collateralToken.unlockedAmount &&\n    !localApproved;\n\n  return (\n    <>\n      {loading ? (\n        <>\n          <Loading size=\"small\" />\n          {tx ? <EtherscanLink path=\"tx\" hash={tx} /> : null}\n        </>\n      ) : (\n        <div className=\"CreateVault__Steps\">\n          <div className=\"CreateVault__Step\">\n            <p>\n              How much {vaultData.collateralToken} do you want to lock up as\n              collateral?\n            </p>\n            <Input\n              type=\"number\"\n              name=\"depositAmount\"\n              size=\"large\"\n              value={vaultData.depositAmount}\n              onChange={handleChange}\n              addonAfter={vaultData.collateralToken}\n            />\n\n            {needsUnlock ? (\n              <>\n                <p className=\"smalltxt\">\n                  Please give allowance for your collateral to continue.\n                </p>\n                <ApproveToken\n                  tokenAddress={bank.data.collateralToken.address}\n                  bankAddress={bank.service.contractAddr}\n                  setError={setError}\n                  setLocalApproved={setLocalApproved}\n                />\n              </>\n            ) : null}\n          </div>\n          <div className=\"CreateVault__Step\">\n            <p className={needsUnlock ? \"disabled\" : \"\"}>\n              How much {vaultData.debtToken} do you want to borrow?\n            </p>\n            <Input\n              type=\"number\"\n              name=\"borrowAmount\"\n              size=\"large\"\n              disabled={needsUnlock}\n              value={vaultData.borrowAmount}\n              onChange={handleChange}\n              addonAfter={vaultData.debtToken}\n            />\n\n            {error ? (\n              <div>\n                <p>{error}</p>\n              </div>\n            ) : null}\n          </div>\n          <div className=\"CreateVault__Submitter\">\n            <Button\n              shape=\"round\"\n              size=\"large\"\n              className=\"purplebutton\"\n              disabled={needsUnlock}\n              onClick={() => handleNextClick()}\n            >\n              submit\n            </Button>\n            <p className={\"smalltxt \" + (needsUnlock && \"disabled\")}>\n              Upon submitting, 2 transactions will be initiated.\n            </p>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default DepositBorrow;\n","import React from \"react\";\n\nconst Logo = ({\n  style = {},\n  fill = \"white\",\n  width = \"130px\",\n  height = \"\",\n  className = \"\",\n  viewBox = \"0 0 130 20\",\n}) => (\n  <svg\n    width={width}\n    style={style}\n    // height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <g>\n      <path\n        fill={fill}\n        d=\"M50.59,6.14c-0.94,0-1.8,0.21-2.6,0.63c-0.79,0.42-1.42,0.98-1.89,1.7c-0.83-1.55-2.25-2.32-4.25-2.32\n                c-0.9,0-1.7,0.19-2.39,0.56c-0.69,0.37-1.24,0.87-1.66,1.5l-0.29-1.75h-2.95v12.94h3.34v-6.68c0-1.18,0.27-2.1,0.82-2.77\n                c0.55-0.66,1.27-0.99,2.15-0.99c0.9,0,1.57,0.3,2.01,0.89c0.43,0.59,0.65,1.44,0.65,2.56v6.99h3.34v-6.68\n                c0-1.18,0.27-2.1,0.82-2.77c0.55-0.66,1.27-0.99,2.18-0.99c0.89,0,1.54,0.3,1.97,0.89c0.43,0.59,0.64,1.44,0.64,2.56v6.99h3.34\n                v-7.3c0-1.95-0.45-3.43-1.36-4.43C53.57,6.64,52.28,6.14,50.59,6.14z\"\n      />\n      <path\n        fill={fill}\n        d=\"M75.03,6.14c-0.94,0-1.8,0.21-2.6,0.63c-0.79,0.42-1.42,0.98-1.89,1.7c-0.83-1.55-2.25-2.32-4.25-2.32\n                c-0.9,0-1.7,0.19-2.39,0.56c-0.69,0.37-1.24,0.87-1.66,1.5l-0.29-1.75h-2.95v12.94h3.34v-6.68c0-1.18,0.27-2.1,0.82-2.77\n                c0.55-0.66,1.27-0.99,2.15-0.99c0.9,0,1.57,0.3,2.01,0.89c0.43,0.59,0.65,1.44,0.65,2.56v6.99h3.34v-6.68\n                c0-1.18,0.27-2.1,0.82-2.77c0.55-0.66,1.27-0.99,2.18-0.99c0.89,0,1.54,0.3,1.97,0.89c0.43,0.59,0.64,1.44,0.64,2.56v6.99h3.34\n                v-7.3c0-1.95-0.45-3.43-1.36-4.43C78.02,6.64,76.72,6.14,75.03,6.14z\"\n      />\n      <path\n        fill={fill}\n        d=\"M93.05,7c-1-0.57-2.12-0.86-3.35-0.86c-1.25,0-2.38,0.29-3.38,0.86c-1,0.57-1.8,1.37-2.39,2.39\n                c-0.59,1.02-0.89,2.2-0.89,3.53c0,1.34,0.29,2.52,0.87,3.53c0.58,1.02,1.37,1.81,2.37,2.39c1,0.57,2.13,0.86,3.38,0.86\n                c1.23,0,2.36-0.29,3.37-0.86c1.01-0.57,1.8-1.37,2.39-2.39c0.58-1.02,0.87-2.2,0.87-3.53c0-1.34-0.29-2.52-0.87-3.53\n                C94.84,8.37,94.05,7.57,93.05,7z M91.94,15.83c-0.64,0.65-1.4,0.98-2.27,0.98c-0.87,0-1.62-0.33-2.26-0.98\n                c-0.64-0.65-0.95-1.62-0.95-2.91c0-1.29,0.32-2.26,0.95-2.91c0.63-0.65,1.4-0.98,2.28-0.98c0.85,0,1.6,0.33,2.24,0.98\n                s0.97,1.62,0.97,2.91C92.9,14.2,92.58,15.17,91.94,15.83z\"\n      />\n      <path\n        fill={fill}\n        d=\"M109.55,8.22c-0.45-0.66-1.04-1.17-1.77-1.54c-0.73-0.37-1.58-0.55-2.56-0.55c-1.22,0-2.3,0.29-3.26,0.87\n                c-0.96,0.58-1.71,1.38-2.27,2.4c-0.56,1.02-0.83,2.18-0.83,3.48s0.28,2.47,0.83,3.5c0.56,1.03,1.31,1.84,2.27,2.43\n                c0.96,0.59,2.04,0.89,3.26,0.89c1.1,0,1.99-0.22,2.67-0.65s1.24-0.94,1.66-1.51l0.36,1.85h2.97V0.6h-3.34V8.22z M108.57,15.7\n                c-0.69,0.72-1.57,1.08-2.65,1.08c-1.06,0-1.94-0.37-2.63-1.1c-0.7-0.73-1.04-1.66-1.04-2.79c0-1.13,0.35-2.05,1.04-2.77\n                c0.7-0.71,1.57-1.07,2.63-1.07c1.08,0,1.96,0.36,2.65,1.08c0.69,0.72,1.03,1.65,1.03,2.78C109.6,14.05,109.26,14.97,108.57,15.7z\"\n      />\n      <path\n        fill={fill}\n        d=\"M128.24,9.38c-0.58-1.02-1.37-1.81-2.37-2.39c-1-0.57-2.12-0.86-3.35-0.86c-1.25,0-2.38,0.29-3.38,0.86\n                c-1,0.57-1.8,1.37-2.39,2.39c-0.59,1.02-0.89,2.2-0.89,3.53c0,1.34,0.29,2.52,0.87,3.53c0.58,1.02,1.37,1.81,2.37,2.39\n                c1,0.57,2.13,0.86,3.38,0.86c1.23,0,2.36-0.29,3.36-0.86c1.01-0.57,1.8-1.37,2.39-2.39c0.58-1.02,0.87-2.2,0.87-3.53\n                C129.11,11.58,128.82,10.4,128.24,9.38z M124.75,15.83c-0.64,0.65-1.4,0.98-2.27,0.98c-0.87,0-1.62-0.33-2.26-0.98\n                c-0.64-0.65-0.95-1.62-0.95-2.91c0-1.29,0.32-2.26,0.95-2.91c0.63-0.65,1.4-0.98,2.28-0.98c0.85,0,1.6,0.33,2.24,0.98\n                c0.64,0.65,0.97,1.62,0.97,2.91C125.72,14.2,125.4,15.17,124.75,15.83z\"\n      />\n      <path\n        fill={fill}\n        d=\"M28.35,7c-1-0.57-2.12-0.86-3.35-0.86c-1.25,0-2.38,0.29-3.38,0.86c-1,0.57-1.8,1.37-2.39,2.39\n                c-0.53,0.92-0.82,1.02-0.88,2.2h-2.73c-0.95,0-1.82,0.91-1.99,2.11c-0.23,0.94-0.71,1.67-1.45,2.2c-0.74,0.53-1.72,0.8-2.93,0.8\n                c-1.69,0-3.01-0.57-3.97-1.71c-0.96-1.14-1.43-2.71-1.43-4.71c0-2,0.48-3.57,1.43-4.72c0.96-1.15,2.28-1.72,3.97-1.72\n                c1.22,0,2.2,0.28,2.93,0.85c0.74,0.57,1.22,1.34,1.45,2.33h3.68c-0.35-1.97-1.22-3.49-2.62-4.58c-1.4-1.09-3.2-1.63-5.39-1.63\n                c-1.84,0-3.43,0.4-4.75,1.2c-1.32,0.8-2.34,1.91-3.05,3.34C0.8,6.78,0.44,8.42,0.44,10.28c0,1.86,0.36,3.5,1.07,4.92\n                c0.71,1.42,1.73,2.52,3.05,3.31c1.32,0.79,2.9,1.19,4.75,1.19c2.19,0,3.99-0.53,5.39-1.59c1.38-1.05,2.25-2.5,2.61-4.35h4.5l0-0.11\n                h0c0-0.01,0-0.03,0-0.04l-0.03-0.9c0.03-1.18,0.35-2.09,0.95-2.71c0.63-0.65,1.4-0.98,2.28-0.98c0.85,0,1.6,0.33,2.24,0.98\n                c0.64,0.65,0.97,1.62,0.97,2.91c0,1.29-0.32,2.26-0.97,2.91c-0.64,0.65-1.4,0.98-2.27,0.98v2.9c1.23,0,2.36-0.29,3.37-0.86\n                c1.01-0.57,1.8-1.37,2.39-2.39c0.58-1.02,0.87-2.2,0.87-3.53c0-1.34-0.29-2.52-0.87-3.53C30.14,8.37,29.35,7.57,28.35,7z\"\n      />\n    </g>\n  </svg>\n);\n\nconst Bank = ({\n  style = {},\n  fill = \"white\",\n  width = \"50px\",\n  className = \"\",\n  viewBox = \"0 0 50 50\",\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={width}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path\n      fill={fill}\n      d=\"M39.32,19.1v-.22a2.12,2.12,0,0,0-1-1.69L26,9.59a2,2,0,0,0-2,0L12,17.45a2.2,2.2,0,0,0-.92,1.68,1.35,1.35,0,0,0,1.37,1.34h1.21a1.45,1.45,0,0,0-.1.51V33.55a1.62,1.62,0,0,0,0,.19H12.05a1.37,1.37,0,0,0-1.37,1.38v2.55A1.37,1.37,0,0,0,12.05,39H38a1.37,1.37,0,0,0,1.37-1.37V35.12A1.37,1.37,0,0,0,38,33.74H36.42a1.62,1.62,0,0,0,0-.19V21a1.45,1.45,0,0,0-.1-.51H38A1.37,1.37,0,0,0,39.32,19.1Zm-27.08,0a1,1,0,0,1,.39-.69l12-7.83a.7.7,0,0,1,.37-.09.67.67,0,0,1,.33.08l12.4,7.59a1,1,0,0,1,.38.69v.22a.19.19,0,0,1-.19.19H12.43A.18.18,0,0,1,12.24,19.13ZM26.47,33.55a.2.2,0,0,1-.2.19H23.73a.2.2,0,0,1-.2-.19V21a.2.2,0,0,1,.2-.2h2.54a.2.2,0,0,1,.2.2Zm-4-13.08a1.45,1.45,0,0,0-.1.51V33.55a1.62,1.62,0,0,0,0,.19H18.8a1.62,1.62,0,0,0,0-.19V21a1.45,1.45,0,0,0-.1-.51ZM14.72,33.55V21a.2.2,0,0,1,.2-.2h2.55a.2.2,0,0,1,.19.2V33.55a.2.2,0,0,1-.19.19H14.92A.2.2,0,0,1,14.72,33.55Zm23.42,1.57v2.55a.19.19,0,0,1-.19.19H12.05a.2.2,0,0,1-.2-.19V35.12a.2.2,0,0,1,.2-.2H38A.19.19,0,0,1,38.14,35.12Zm-5.6-1.38a.2.2,0,0,1-.2-.19V21a.2.2,0,0,1,.2-.2h2.54a.2.2,0,0,1,.2.2V33.55a.2.2,0,0,1-.2.19Zm-1.34,0H27.61a1.62,1.62,0,0,0,0-.19V21a1.45,1.45,0,0,0-.1-.51h3.71a1.45,1.45,0,0,0-.1.51V33.55A1.62,1.62,0,0,0,31.2,33.74Z\"\n    />\n  </svg>\n);\n\nconst Vault = ({\n  style = {},\n  fill = \"white\",\n  width = \"50px\",\n  className = \"\",\n  viewBox = \"0 0 50 50\",\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={width}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path\n      fill={fill}\n      d=\"M35.36,40H15.73a5.17,5.17,0,0,1-5.16-5.17V15.19A5.17,5.17,0,0,1,15.73,10H35.36a5.17,5.17,0,0,1,5.16,5.17V34.81A5.17,5.17,0,0,1,35.36,40ZM15.73,11.59a3.6,3.6,0,0,0-3.6,3.6V34.81a3.6,3.6,0,0,0,3.6,3.6H35.36a3.6,3.6,0,0,0,3.6-3.6V15.19a3.6,3.6,0,0,0-3.6-3.6Z\"\n    />\n    <path\n      fill={fill}\n      d=\"M21.35,27.94l-4.57,4.37a.78.78,0,0,0,.54,1.34.8.8,0,0,0,.54-.21l4.58-4.38A5,5,0,0,1,21.35,27.94Z\"\n    />\n    <path\n      fill={fill}\n      d=\"M21.42,22a5,5,0,0,1,1.1-1.11l-4.31-4.31a.78.78,0,1,0-1.11,1.1Z\"\n    />\n    <path\n      fill={fill}\n      d=\"M34.34,16.59a.8.8,0,0,0-1.11,0l-4.57,4.38a5.22,5.22,0,0,1,1.08,1.12l4.57-4.37A.79.79,0,0,0,34.34,16.59Z\"\n    />\n    <path\n      fill={fill}\n      d=\"M29.67,28a5,5,0,0,1-1.1,1.11l4.31,4.31a.82.82,0,0,0,.56.23A.78.78,0,0,0,34,32.34Z\"\n    />\n    <path\n      fill={fill}\n      d=\"M25.55,30.76A5.76,5.76,0,1,1,31.3,25,5.77,5.77,0,0,1,25.55,30.76Zm0-10.27A4.51,4.51,0,1,0,30.05,25,4.51,4.51,0,0,0,25.55,20.49Z\"\n    />\n    <circle fill={fill} cx=\"25.55\" cy=\"25\" r=\"2.31\" />\n    <path\n      fill={fill}\n      d=\"M10.1,20.29a.63.63,0,0,1-.62-.63v-2.5a.63.63,0,0,1,1.25,0v2.5A.63.63,0,0,1,10.1,20.29Z\"\n    />\n    <path\n      fill={fill}\n      d=\"M10.1,33.72a.63.63,0,0,1-.62-.63v-2.5a.63.63,0,0,1,1.25,0v2.5A.63.63,0,0,1,10.1,33.72Z\"\n    />\n  </svg>\n);\n\nconst Arrowdown = ({\n  style = {},\n  fill = \"white\",\n  width = \"15.603\",\n  height = \"9.052\",\n  className = \"\",\n  viewBox = \"0 0 15.603 9.052\",\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path\n      id=\"Path_104\"\n      data-name=\"Path 104\"\n      d=\"M0,0,6.24,6.722,0,12.775\"\n      transform=\"translate(14.189 1.414) rotate(90)\"\n      fill=\"none\"\n      stroke={fill}\n      strokeLinecap=\"round\"\n      strokeMiterlimit=\"10\"\n      strokeWidth=\"2\"\n    />\n  </svg>\n);\n\nconst Vmark = ({\n  style = {},\n  fill = \"#69eaae\",\n  width = \"29.289\",\n  height = \"20\",\n  className = \"\",\n  viewBox = \"0 0 29.289 20\",\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <g id=\"Group_159\" transform=\"translate(-627.931 -568.38)\">\n      <path id=\"Path_101\" d=\"M637.744,588.38l-9.448-10a1.338,1.338,0,0,1,1.945-1.837l7.627,8.075,17.1-15.878a1.338,1.338,0,1,1,1.82,1.961Z\" fill={fill}/>\n    </g>\n  </svg>\n);\n\nconst Xmark = ({\n  style = {},\n  fill = \"#4f56b5\",\n  width = \"30.253\",\n  height = \"30.252\",\n  className = \"\",\n  viewBox = \"0 0 30.253 30.252\",\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n  <path id=\"Path_99\"  d=\"M570.593,575.977l13.419-13.418a1,1,0,1,0-1.414-1.415l-13.419,13.419-13.42-13.419a1,1,0,0,0-1.414,1.415l13.42,13.418L554.345,589.4a1,1,0,0,0,1.414,1.415l13.42-13.419L582.6,590.811a1,1,0,1,0,1.414-1.415Z\" transform=\"translate(-554.052 -560.852)\" fill={fill}/>\n  </svg>\n);\n\nexport default { Logo, Bank, Vault, Arrowdown, Vmark, Xmark };\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Modal, Button } from \"antd\";\n\nimport DepositBorrow from \"./DepositBorrow\";\nimport Icons from \"../../../Icons\";\n\nimport \"./CreateVault.scss\";\n\nconst CreateVault = ({ bank, visible, setVisible }) => {\n  const [step, setStep] = useState(1);\n  const [vaultData, setVaultData] = useState({\n    collateralToken: bank.data.collateralToken.symbol,\n    debtToken: \"DAI\",\n    depositAmount: \"0\",\n    borrowAmount: \"0\",\n  });\n\n  const renderStep = () => {\n    switch (step) {\n      case 1: {\n        return (\n          <>\n            <p>\n              You're creating a vault for\n              <br />\n              <strong>\n                {bank.data.name} ({bank.data.collateralToken.symbol}-\n                {bank.data.debtToken.symbol})\n              </strong>\n            </p>\n            <Button\n              shape=\"round\"\n              size=\"large\"\n              className=\"purplebutton\"\n              onClick={() => setStep(2)}\n            >\n              start\n            </Button>\n          </>\n        );\n      }\n      case 2: {\n        return (\n          <DepositBorrow\n            vaultData={vaultData}\n            setVaultData={setVaultData}\n            setStep={setStep}\n            bank={bank}\n          />\n        );\n      }\n      case 3: {\n        return (\n          <>\n            <p>Setup succesful!</p>\n            <Icons.Vmark className=\"vmark\" />\n            <Link to=\"/vaults?new=true\">\n              <Button className=\"biggestbutton heavyshadow\" size=\"large\">\n                <Icons.Vault fill=\"#4F56B5\" />\n                view vault\n              </Button>\n            </Link>\n          </>\n        );\n      }\n      default: {\n        return null;\n      }\n    }\n  };\n\n  return (\n    <>\n      <Modal\n        wrapClassName=\"vertical-center-modal\"\n        visible={visible}\n        onCancel={() => setVisible(false)}\n        maskClosable={false}\n        footer={null}\n        closeIcon={<Icons.Xmark width=\"22px\" />}\n      >\n        <h2>Creating a Vault</h2>\n        {renderStep()}\n      </Modal>\n    </>\n  );\n};\n\nexport default CreateVault;\n","import React, { useContext } from \"react\";\nimport Web3Modal from \"web3modal\";\nimport { Button } from \"antd\";\n\nimport { getChainData } from \"../../utils/chains\";\nimport { w3connect, providerOptions, USER_TYPE } from \"../../utils/auth\";\nimport Web3Service from \"../../utils/web3-service\";\nimport { Web3Context } from \"../../contexts/RootContexts\";\nimport { BankContext } from \"../../contexts/BankContext\";\n\nconst Web3SignIn = (props) => {\n  const [, setWeb3Service] = useContext(Web3Context);\n  const { dispatch } = useContext(BankContext);\n\n  const activate = async () => {\n    const web3Connect = new Web3Modal({\n      network: getChainData(+process.env.REACT_APP_CHAIN_ID).network, // optional\n      providerOptions, // required\n      cacheProvider: true,\n    });\n    try {\n      const w3m = await w3connect(web3Connect);\n      const [account] = await w3m.web3.eth.getAccounts();\n      const web3Service = new Web3Service(w3m.web3);\n      setWeb3Service({ service: web3Service, account });\n      localStorage.setItem(\"loginType\", USER_TYPE.WEB3);\n      dispatch({ type: \"clearBanks\" });\n    } catch (err) {\n      console.log(\"error activating\", err);\n    }\n  };\n  const size = props.size || \"big\";\n  return (\n    <>\n      {size === \"big\" ? (\n        <Button\n          className=\"lightshadow biggestbutton\"\n          size=\"large\"\n          onClick={() => activate()}\n        >\n          Sign in with Web3\n        </Button>\n      ) : (\n        <Button\n          className={props.color ? props.color + \"button\" : \"\"}\n          size=\"large\"\n          shape=\"round\"\n          onClick={() => activate()}\n        >\n          Sign in with Web3\n        </Button>\n      )}\n    </>\n  );\n};\n\nexport default Web3SignIn;\n","import React, { useContext } from \"react\";\n\nimport { BankContext } from \"../../../contexts/BankContext\";\n// import TRB from '../../../images/TRB.png';\n// import DAI from '../../../images/TDAI.png';\n\nimport \"./BankStatusBar.scss\";\n\nconst BankStatusBar = (props) => {\n  const { state } = useContext(BankContext);\n  const data = state.banks[state.bankAddresses[0]].data;\n  const granularity = 1000000;\n\n  return (\n    <>\n    {\n      props.vault ?\n    <>\n      {props.coll ?\n      <div className=\"VaultDetail\">\n        <p>{data.collateralToken.symbol} Price (USD)</p>\n        <h3>{+data.collateralToken.price / granularity} $</h3>\n      </div>\n      :\n      <div className=\"VaultDetail\">\n        <p>{data.debtToken.symbol} Price (USD)</p>\n        <h3>{+data.debtToken.price / granularity} $</h3>\n      </div>\n      }\n    </>\n    :\n    <>\n      <div className=\"BankDetail\">\n        <p>{data.collateralToken.symbol} Price (USD)</p>\n        <h3>{+data.collateralToken.price / granularity} $</h3>\n      </div>\n      <div className=\"BankDetail\">\n        <p>{data.debtToken.symbol} Price (USD)</p>\n        <h3>{+data.debtToken.price / granularity} $</h3>\n      </div>\n    </>\n    }\n    </>\n  );\n};\n\nexport default BankStatusBar;\n","import React, { useState, useContext } from \"react\";\nimport { Button } from \"antd\";\n\nimport { Web3Context } from \"../../../contexts/RootContexts\";\nimport { truncateAddr } from \"../../../utils/helpers\";\nimport EtherscanLink from \"../../shared/EtherscanLink/EthercanLink\";\nimport CreateVault from \"../../vaults/CreateVault/CreateVault\";\nimport Web3SignIn from \"../../account/Web3SignIn\";\nimport BankStatusBar from \"../BankStatusBar/BankStatusBar\";\n\nimport \"./BankDetails.scss\";\n\nconst BankDetails = ({ address, bank }) => {\n  const [web3] = useContext(Web3Context);\n  const [creatingVault, setCreatingVault] = useState(false);\n  const data = bank.data;\n\n  return (\n    <>\n      <div className=\"BankDetails\">\n        <div className=\"BankDetails__header\">\n          <h2>{data.name}</h2>\n          <p>{truncateAddr(address)}</p>\n          <EtherscanLink className=\"flexer\" path=\"address\" hash={address} />\n          <div className=\"flexer\"></div>\n          {web3 && web3.account ? (\n            <>\n              {!bank.data.vault.hasVault ? (\n                <Button\n                  shape=\"round\"\n                  size=\"large\"\n                  className=\"purpleoutlined createvaultbtn\"\n                  onClick={() => setCreatingVault(true)}\n                >\n                  + create vault\n                </Button>\n              ) : null}\n            </>\n          ) : (\n            <Web3SignIn size=\"small\" color=\"purple\" />\n          )}\n        </div>\n\n        <div className=\"BankDetails__content\">\n          <div className=\"BankDetail flexer\">\n            <p>Available for borrow</p>\n            <div className=\"BigDetail\">\n              <h1>{(+data.reserveBalance / 1e18).toFixed()}</h1>\n              <h3>{data.debtToken.symbol}</h3>\n            </div>\n          </div>\n\n          <div className=\"BankDetails__Column\">\n            <BankStatusBar />\n          </div>\n\n\n          <div className=\"BankDetails__Column\">\n            <div className=\"BankDetail\">\n              <p>Interest Rate</p>\n              <h3>{+data.interestRate / 100} %</h3>\n            </div>\n            <div className=\"BankDetail\">\n              <p>Origination Fee</p>\n              <h3>{data.originationFee / 100} %</h3>\n            </div>\n          </div>\n\n          <div>\n            <div className=\"BankDetail\">\n              <p>Collateralization Ratio</p>\n              <h3>{data.collateralizationRatio} %</h3>\n            </div>\n            <div className=\"BankDetail\">\n              <p>Liquidation Penalty</p>\n              <h3>{data.liquidationPenalty} %</h3>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <CreateVault\n        bank={bank}\n        setVisible={setCreatingVault}\n        visible={creatingVault}\n      />\n    </>\n  );\n};\n\nexport default BankDetails;\n","import React, { useEffect, useContext } from \"react\";\n\nimport { Web3Context } from \"../../contexts/RootContexts\";\nimport { BankContext } from \"../../contexts/BankContext\";\nimport BankService from \"../../utils/bank-service\";\nimport BankDetails from \"../../components/banks/BankDetails/BankDetails\";\nimport Loading from \"../../components/shared/Loader/Loader\";\n\nimport \"./Banks.scss\";\n\nconst Banks = () => {\n  const [web3] = useContext(Web3Context);\n  const { state, dispatch } = useContext(BankContext);\n\n  useEffect(() => {\n    const getBankData = async () => {\n      let banks = {};\n      for (const bankAddress of state.bankAddresses) {\n        const bankService = new BankService(\n          bankAddress,\n          web3.service,\n          web3.account\n        );\n        const bankState = await bankService.getBankState();\n        banks[bankAddress] = { service: bankService, data: bankState };\n      }\n\n      dispatch({ type: \"setBanks\", payload: banks });\n    };\n\n    const hasWeb3 = web3 && web3.service;\n    const needsData = !state.banks;\n    if (hasWeb3 && needsData) {\n      getBankData();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [web3, state.banks]);\n\n  const renderBanks = () => {\n    return Object.keys(state.banks).map((address) => {\n      return (\n        <BankDetails\n          key={address}\n          address={address}\n          bank={state.banks[address]}\n        />\n      );\n    });\n  };\n\n  return (\n    <div>\n      {state.banks ? (\n        <div className=\"ContentTotal\">{renderBanks()}</div>\n      ) : (\n        <div className=\"fullframe\">\n          <Loading />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Banks;\n","import React from \"react\";\nimport { Button } from \"antd\";\n\nimport \"./VaultActions.scss\";\n\nconst VaultActions = ({\n  section,\n  activeTransaction,\n  setActiveTransaction,\n  txPending,\n}) => {\n  // can use activeTransaction to set a class on active state\n  return (\n    <div className=\"VaultActions\">\n      {section === \"locked\" ? (\n        <>\n          <Button\n            type=\"default\"\n            shape=\"round\"\n            size=\"large\"\n            className=\"purpleoutlined\"\n            disabled={txPending || activeTransaction}\n            onClick={() => setActiveTransaction(\"withdraw\")}\n          >\n            withdraw\n          </Button>\n          <Button\n            type=\"primary\"\n            shape=\"round\"\n            size=\"large\"\n            className=\"purplebutton\"\n            disabled={txPending || activeTransaction}\n            onClick={() => setActiveTransaction(\"deposit\")}\n          >\n            deposit\n          </Button>\n        </>\n      ) : (\n        <>\n          <Button\n            type=\"default\"\n            shape=\"round\"\n            size=\"large\"\n            className=\"purpleoutlined\"\n            disabled={txPending || activeTransaction}\n            onClick={() => setActiveTransaction(\"borrow\")}\n          >\n            borrow\n          </Button>\n          <Button\n            type=\"primary\"\n            shape=\"round\"\n            size=\"large\"\n            className=\"purplebutton\"\n            disabled={txPending || activeTransaction}\n            onClick={() => setActiveTransaction(\"repay\")}\n          >\n            repay\n          </Button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default VaultActions;\n","import React, { useContext, useState } from \"react\";\nimport { Button, Input } from \"antd\";\n\nimport { BankContext } from \"../../../contexts/BankContext\";\nimport { getVaultTxCalcValues } from \"../../../utils/helpers\";\nimport Loading from \"../../shared/Loader/Loader\";\nimport EtherscanLink from \"../../shared/EtherscanLink/EthercanLink\";\nimport ApproveToken from \"../../shared/ApproveToken/ApproveToken\";\n\nimport \"./VaultTransaction.scss\";\n\nconst VaultTransaction = ({\n  activeTransaction,\n  setActiveTransaction,\n  bank,\n  tx,\n  setTx,\n}) => {\n  const { dispatch } = useContext(BankContext);\n  const [newValue, setNewValue] = useState();\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState();\n  const [localApproved, setLocalApproved] = useState();\n\n  const handleAction = async () => {\n    if (+newValue > 0) {\n      setLoading(true);\n\n      let res;\n      if (activeTransaction === \"withdraw\") {\n        res = await bank.service.withdraw(newValue, setTx);\n      }\n\n      if (activeTransaction === \"deposit\") {\n        res = await bank.service.deposit(newValue, setTx);\n      }\n\n      if (activeTransaction === \"borrow\") {\n        res = await bank.service.borrow(newValue, setTx);\n      }\n\n      if (activeTransaction === \"repay\") {\n        res = await bank.service.repay(newValue, setTx);\n      }\n\n      if (res.error) {\n        setError(\"Transaction Error\");\n        setLoading(false);\n        setTx(null);\n      } else {\n        dispatch({ type: \"refreshBanks\" });\n        setActiveTransaction(null);\n      }\n    }\n  };\n\n  const isCollateral =\n    activeTransaction === \"withdraw\" || activeTransaction === \"deposit\";\n\n  const handleCancel = () => {\n    setNewValue(null);\n    setActiveTransaction(null);\n  };\n\n  const handleChange = (e) => {\n    setNewValue(e.target.value);\n  };\n\n  const handleMaxRepay = () => {\n    setNewValue(+bank.data.vault.debtAmount / 1e18);\n  };\n\n  const needsRepayUnlock = () => {\n    const isRepay = activeTransaction === \"repay\";\n    const needsApproval =\n      +bank.data.debtToken.unlockedAmount === 0 ||\n      +newValue > +bank.data.debtToken.unlockedAmount;\n    return isRepay && needsApproval && !localApproved;\n  };\n\n  const data = bank.data;\n  const vaultTxCalcValues = getVaultTxCalcValues(\n    data,\n    activeTransaction,\n    newValue\n  );\n\n  return (\n    <div className=\"VaultTransaction\">\n      {loading ? (\n        <>\n          <Loading size=\"small\" />\n          {tx ? <EtherscanLink path=\"tx\" hash={tx} /> : null}\n        </>\n      ) : (\n        <>\n          <div className=\"VaultTransaction__preview\">\n            <div className=\"VaultDetail\">\n              <p>New collateralization ratio</p>\n              <h3>\n                {vaultTxCalcValues.newCollateralizationRatio === Infinity\n                  ? \"\"\n                  : vaultTxCalcValues.newCollateralizationRatio.toFixed(2)}{\" \"}\n                %\n              </h3>\n            </div>\n            <div className=\"VaultDetail\">\n              <p>New liquidation price</p>\n              <h3>\n                {vaultTxCalcValues.newLiquidationPrice.toFixed(4)}{\" \"}\n                {data.collateralToken.symbol}\n                /USD\n              </h3>\n            </div>\n          </div>\n          <div className=\"VaultTransaction__form__Total\">\n            <div className=\"VaultTransaction__form\">\n              {needsRepayUnlock() ? (\n                <>\n                  <p>Please give allowance for your repay to continue.</p>\n                  <ApproveToken\n                    tokenAddress={bank.data.debtToken.address}\n                    bankAddress={bank.service.contractAddr}\n                    setError={setError}\n                    setLocalApproved={setLocalApproved}\n                  />\n                </>\n              ) : (\n                <>\n                  <p>\n                    How much{\" \"}\n                    {isCollateral\n                      ? bank.data.collateralToken.symbol\n                      : bank.data.debtToken.symbol}{\" \"}\n                    do you wish to {activeTransaction}?\n                  </p>\n\n                  <Input\n                    type=\"number\"\n                    size=\"large\"\n                    value={newValue}\n                    onChange={handleChange}\n                    addonAfter={\n                      isCollateral\n                        ? bank.data.collateralToken.symbol\n                        : bank.data.debtToken.symbol\n                    }\n                  />\n                </>\n              )}\n            </div>\n            <div className=\"VaultTransaction__buttons\">\n              {activeTransaction === \"repay\" ? (\n                <Button type=\"link\" onClick={() => handleMaxRepay()}>\n                  repay max\n                </Button>\n              ) : null}\n              <Button type=\"link\" onClick={() => handleCancel()}>\n                cancel\n              </Button>\n              <Button\n                type=\"primary\"\n                shape=\"round\"\n                size=\"large\"\n                className=\"purplebutton\"\n                onClick={() => handleAction()}\n                disabled={!newValue}\n              >\n                {activeTransaction}\n              </Button>\n            </div>\n          </div>\n\n          {error ? (\n            <div>\n              <p>{error}</p>\n            </div>\n          ) : null}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default VaultTransaction;\n","import React, { useState } from \"react\";\n\nimport VaultActions from \"../VaultActions/VaultActions\";\nimport VaultTransaction from \"../VaultTransaction/VaultTransaction\";\nimport Icons from \"../../../Icons\";\n\nimport \"./VaultDetails.scss\";\nimport { truncateAddr, getVaultCalcValues } from \"../../../utils/helpers\";\nimport BankStatusBar from \"../../banks/BankStatusBar/BankStatusBar\";\n\nconst VaultDetails = ({ bank }) => {\n  const [collColor] = useState(\"tellorgreen\");\n  const [activeTransaction, setActiveTransaction] = useState();\n  const [txPending, setTxPending] = useState();\n\n  const data = bank.data;\n\n  const vaultCalcValues = getVaultCalcValues(data);\n\n  return (\n    <div className=\"VaultDetails\">\n      <div className=\"VaultDetails__header\">\n        <div className=\"VaultDetails__Column collrat\">\n          <p>Collateralization Ratio</p>\n          <div className=\"BigDetail\">\n            <h1 className={collColor}>\n              {+data.vault.collateralizationRatio / 100}\n            </h1>\n            <h3 className={collColor}>%</h3>\n          </div>\n        </div>\n        <div className=\"VaultDetails__Column\">\n          <div className=\"VaultDetail\">\n            <p>Liquidation Price</p>\n            <div className=\"BigDetail liqprice\">\n              <h1>{vaultCalcValues.liquidationPrice.toFixed(2)}</h1>\n              <h3>{data.collateralToken.symbol}/USD</h3>\n            </div>\n          </div>\n        </div>\n        <div className=\"VaultDetails__Bank\">\n          <p>This vault is part of</p>\n          <div className=\"BankData\">\n            <div className=\"BankDataTxt\">\n              <p className=\"BankName\">{bank.data.name}</p>\n              <p>{truncateAddr(bank.service.contractAddr)}</p>\n            </div>\n            <Icons.Bank fill=\"#848484\" />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"VaultDetails__content firstrow\">\n        <div className=\"VaultDetails__Column\">\n          <div className=\"VaultDetail\">\n            <p>Total Collateral Locked</p>\n            <h3>\n              {(+data.vault.collateralAmount / 1e18).toFixed(4)}{\" \"}\n              {data.collateralToken.symbol}\n            </h3>\n          </div>\n        </div>\n        <div className=\"VaultDetails__Column\">\n          <div className=\"VaultDetail\">\n            <p>Available to withdraw</p>\n            <h3>\n              {vaultCalcValues.withdrawAvailable.toFixed(4)}{\" \"}\n              {data.collateralToken.symbol}\n            </h3>\n          </div>\n        </div>\n        <div className=\"VaultDetails__Column flexer\">\n          <BankStatusBar vault coll />\n        </div>\n        <VaultActions\n          section=\"locked\"\n          activeTransaction={activeTransaction}\n          setActiveTransaction={setActiveTransaction}\n          txPending={txPending}\n        />\n      </div>\n\n      <div className=\"VaultDetails__content\">\n        <div className=\"VaultDetails__Column\">\n          <div className=\"VaultDetail\">\n            <p>Total Debt Owed</p>\n            <h3>\n              {(+data.vault.debtAmount / 1e18).toFixed(4)}{\" \"}\n              {data.debtToken.symbol}\n            </h3>\n          </div>\n        </div>\n        <div className=\"VaultDetails__Column\">\n          <div className=\"VaultDetail\">\n            <p>Available to borrow</p>\n            <h3>\n              {vaultCalcValues.borrowAvailable.toFixed(4)}{\" \"}\n              {data.debtToken.symbol}\n            </h3>\n          </div>\n        </div>\n        <div className=\"VaultDetails__Column flexer\">\n          <BankStatusBar vault />\n        </div>\n        <VaultActions\n          section=\"borrow\"\n          activeTransaction={activeTransaction}\n          setActiveTransaction={setActiveTransaction}\n          txPending={txPending}\n        />\n      </div>\n      {activeTransaction ? (\n        <VaultTransaction\n          activeTransaction={activeTransaction}\n          setActiveTransaction={setActiveTransaction}\n          tx={txPending}\n          setTx={setTxPending}\n          bank={bank}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nexport default VaultDetails;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { Button } from \"antd\";\n\nimport { BankContext } from \"../../contexts/BankContext\";\nimport { Web3Context } from \"../../contexts/RootContexts\";\nimport BankService from \"../../utils/bank-service\";\nimport VaultDetails from \"../../components/vaults/VaultDetails/VaultDetails\";\nimport Loading from \"../../components/shared/Loader/Loader\";\nimport Icons from \"../../Icons\";\nimport Web3SignIn from \"../../components/account/Web3SignIn\";\n\nimport \"./Vault.scss\";\n\nconst Vault = () => {\n  const [web3] = useContext(Web3Context);\n  const { state, dispatch } = useContext(BankContext);\n  const [hasVault, setHasVault] = useState();\n  const location = useLocation();\n\n  useEffect(() => {\n    const getBankData = async () => {\n      let banks = {};\n      for (const bankAddress of state.bankAddresses) {\n        const bankService = new BankService(\n          bankAddress,\n          web3.service,\n          web3.account\n        );\n        const bankState = await bankService.getBankState();\n        banks[bankAddress] = { service: bankService, data: bankState };\n      }\n\n      dispatch({ type: \"setBanks\", payload: banks });\n    };\n\n    const hasWeb3 = web3 && web3.service;\n    const needsData = location.search.split(\"=\")[1] || !state.banks;\n    if ((hasWeb3 && needsData) || state.refreshBanks) {\n      dispatch({ type: \"clearBanks\" });\n      getBankData();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [web3, location, state.refreshBanks]);\n\n  useEffect(() => {\n    if (state.banks) {\n      setHasVault(\n        Object.keys(state.banks).some(\n          (address) => state.banks[address].data.vault.hasVault\n        )\n      );\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.banks]);\n\n  const renderVaults = () => {\n    return Object.keys(state.banks).map((address) => {\n      if (state.banks[address].data.vault.hasVault) {\n        return <VaultDetails key={address} bank={state.banks[address]} />;\n      } else {\n        return null;\n      }\n    });\n  };\n\n  return (\n    <>\n      {web3 && web3.account ? (\n        <>\n          {state.banks ? (\n            <div className=\"ContentTotal\">\n              {hasVault ? (\n                <>{renderVaults()}</>\n              ) : (\n                <div className=\"Vault__Empty\">\n                  <p>\n                    You didn't create a vault yet.\n                    <br />\n                    <strong>Choose a bank to create a vault with.</strong>\n                  </p>\n                  <Link to=\"/\">\n                    <Button className=\"biggestbutton heavyshadow\" size=\"large\">\n                      <Icons.Bank fill=\"#4F56B5\" />\n                      view banks\n                    </Button>\n                  </Link>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"fullframe\">\n              <Loading />\n            </div>\n          )}\n        </>\n      ) : (\n        <div className=\"fullframe\">\n          <p>Sign in to see your vaults</p>\n          <Web3SignIn />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Vault;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst FourOhFour = () => (\n  <div>\n    <h1>You're lost</h1>\n    <Link to=\"/\">Take me home</Link>\n  </div>\n);\n\nexport default FourOhFour;\n","import React from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\nimport Banks from \"./views/Banks/Banks\";\nimport Vault from \"./views/Vault/Vault\";\nimport FourOhFour from \"./views/fourOhFour/fourOhFour\";\n\nconst Routes = () => (\n  <Switch>\n    <Route exact path=\"/\">\n      <Redirect to=\"/banks\" />\n    </Route>\n    <Route path=\"/banks\" exact component={Banks} />\n    <Route path=\"/vaults\" exact component={Vault} />\n\n    <Route path=\"*\" component={FourOhFour} />\n  </Switch>\n);\n\nexport default Routes;\n","import React, { useContext } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { Menu } from \"antd\";\n\nimport { Web3Context } from \"../../../contexts/RootContexts\";\nimport Web3SignIn from \"../../account/Web3SignIn\";\n\nimport Icons from \"../../../Icons\";\nimport { truncateAddr } from \"../../../utils/helpers\";\n\nimport \"./SideNav.scss\";\n\nconst SideNav = () => {\n  const [web3] = useContext(Web3Context);\n  const location = useLocation();\n\n  return (\n    <>\n      <Menu\n        defaultSelectedKeys={location.pathname}\n        mode=\"inline\"\n        inlineIndent={0}\n      >\n\n\n\n\n        <div className=\"web3feedback\">\n          {web3 && web3.account ? <div className=\"connected\"><div className=\"dot\"></div><p>{truncateAddr(web3.account)}</p></div> : <Web3SignIn size=\"small\" />}\n        </div>\n        <Menu.Item key=\"/banks\">\n          <Link to=\"/banks\">\n            <Icons.Bank />\n            Banks\n          </Link>\n        </Menu.Item>\n\n        <Menu.Item key=\"/vaults\">\n          <Link to={`/vaults`}>\n            <Icons.Vault />\n            Vaults\n          </Link>\n        </Menu.Item>\n      </Menu>\n      \n    </>\n  );\n};\n\nexport default SideNav;\n","import React from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Layout } from \"antd\";\n\nimport RootContexts from \"./contexts/RootContexts\";\nimport { BankContextProvider } from \"./contexts/BankContext\";\nimport Routes from \"./Routes\";\nimport SideNav from \"./components/shared/SideNav/SideNav\";\n\nimport Icons from \"../src/Icons\";\n\nimport \"./App.scss\";\n\nconst { Content, Sider } = Layout;\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <RootContexts>\n        <BankContextProvider>\n          <Router>\n            <Layout style={{ minHeight: \"100vh\" }}>\n              <Sider width=\"240px\">\n                <Icons.Logo fill=\"#fff\" width=\"144px\" />\n                <SideNav />\n              </Sider>\n              <Layout>\n                <Content>\n                  <Routes />\n                </Content>\n              </Layout>\n            </Layout>\n          </Router>\n        </BankContextProvider>\n      </RootContexts>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}